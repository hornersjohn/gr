[gd_scene load_steps=4 format=2]

[ext_resource path="res://core/eff.tscn" type="PackedScene" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends \"res://core/eff.gd\"
# Declare member variables here. Examples:
# var a = 2
# var b = \"text\"
onready var tw = $Tween
# Called when the node enters the scene tree for the first time.
func _ready():
	pass

# Called every frame. 'delta' is the elapsed time since the previous frame.
#func _process(delta):
#	pass
func init(cha,pos,id):
	if chaData.infoDs[id].isMod :
			var im = Image.new()
			im.load(\"user://mods/chara/%s/cha.png\" % id)
			var imt = ImageTexture.new()
			imt.create_from_image(im)
			$spr/normal/Sprite.texture = imt
			#img.texture_normal = load(\"user://mods/chara/%s/cha.png\" % id)
	else:
		$spr/normal/Sprite.texture = load(\"res://ex/chara/%s/cha.png\" % id)

	position = cha.global_position
	tw.interpolate_property(self, \"position\",position, pos, 1.5,Tween.TRANS_LINEAR, Tween.EASE_IN_OUT)
	tw.start()
	yield(tw,\"tween_all_completed\")
	var newCha = sys.main.player.addCha(sys.main.newChara(id,1))
	var node = newCha.get_parent()
	node.get_parent().move_child(node,0)
	queue_free()
"

[sub_resource type="Animation" id=2]
loop = true
step = 0.05

[node name="eff" instance=ExtResource( 2 )]
script = SubResource( 1 )

[node name="Sprite" type="Sprite" parent="spr/normal" index="0"]
offset = Vector2( 1.49682, -0.500306 )
region_rect = Rect2( 175.373, 52.5925, 15.8112, 23.5781 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="1"]
autoplay = "idle"
anims/idle = SubResource( 2 )

[node name="Tween" type="Tween" parent="." index="2"]
